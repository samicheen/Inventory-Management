<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <span class="navbar-brand mb-0 h1">Inventory Management</span>
  <button class="navbar-toggler" 
          type="button" 
          [attr.aria-expanded]="!isCollapsed"
          (click)="isCollapsed = !isCollapsed"
          aria-controls="navbarNav" 
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" 
       [collapse]="isCollapsed"
       id="navbarNav">
    <ul class="navbar-nav me-auto">
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="dashboard"><i class="fa fa-dashboard"></i> Dashboard</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="item"><i class="fa fa-tag"></i> Item</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="processing-type"><i class="fa fa-cog"></i> Processing Type</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']" *ngIf="authService.isAdmin()">
        <a class="nav-link" routerLink="user"><i class="fa fa-users"></i> Users</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="vendor"><i class="fa fa-building"></i> Vendor</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="customer"><i class="fa fa-users"></i> Customer</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="purchase"><i class="fa fa-shopping-cart"></i> Purchase</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="inventory"><i class="fa fa-cubes"></i> Inventory</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="manufacture"><i class="fa fa-industry"></i> Manufacturing</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="sales"><i class="fa fa-shopping-bag"></i> Sales</a>
      </li>
      <li class="nav-item" [routerLinkActive]="['active']">
        <a class="nav-link" routerLink="summary"><i class="fa fa-list-alt"></i> Summary</a>
      </li>
    </ul>
    <div class="navbar-nav" *ngIf="currentUser">
      <li class="nav-item dropdown" dropdown>
        <a class="nav-link dropdown-toggle" dropdownToggle id="userDropdown" role="button">
          <i class="fa fa-user"></i> {{ currentUser.username }}
        </a>
        <ul class="dropdown-menu dropdown-menu-end" *dropdownMenu aria-labelledby="userDropdown">
          <li><a class="dropdown-item" href="javascript:void(0)" (click)="$event.preventDefault()"><i class="fa fa-user-circle"></i> Profile</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="javascript:void(0)" (click)="logout(); $event.preventDefault()"><i class="fa fa-sign-out"></i> Logout</a></li>
        </ul>
      </li>
    </div>
  </div>
  <!-- Barcode Scanner - Always visible outside collapsible menu -->
  <div class="navbar-nav" *ngIf="currentUser" style="margin-left: auto;">
    <!-- Mobile: Only show camera button -->
    <button class="btn btn-sm btn-primary" 
            type="button"
            (click)="openBarcodeScanner()"
            title="Scan Barcode with Camera"
            *ngIf="isMobile"
            style="margin-right: 0.5rem;">
      <i class="fa fa-camera"></i> Scan
    </button>
    
    <!-- Web: Show input field with barcode button -->
    <div class="input-group" style="width: 250px; margin-right: 10px;" *ngIf="!isMobile">
      <input type="text" 
             class="form-control form-control-sm" 
             placeholder="Scan barcode..."
             #barcodeInput
             (keyup.enter)="scanBarcode(barcodeInput.value); barcodeInput.value = ''"
             style="font-size: 0.875rem;">
      <div class="input-group-append">
        <button class="btn btn-sm btn-light" 
                type="button"
                (click)="scanBarcode(barcodeInput.value); barcodeInput.value = ''"
                title="Submit Barcode">
          <i class="fa fa-barcode"></i>
        </button>
      </div>
    </div>
  </div>
</nav>
